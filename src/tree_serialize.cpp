// https://leetcode.com/problems/serialize-and-deserialize-binary-tree/

#include <iostream>
#include <vector>
#include <algorithm>
#include <numeric>
#include <optional>
#include <unordered_map>

#include "tree_util.h"

using namespace std;

namespace tree_serialize {
	// AUX START --------------------
	void build_node(const std::vector<int>& values, TreeNode* parent_node, int pos, char dir) {
		if (pos >= values.size() || values[pos] == -1) {
			return;
		}

		TreeNode* node = new TreeNode();
		node->val = values[pos];

		if (dir == 'l') { parent_node->left = node; }
		else /* == r */ { parent_node->right = node; }

		pos *= 2;
		build_node(values, node, pos + 1, 'l');
		build_node(values, node, pos + 2, 'r');
	}

	TreeNode* build(const std::vector<int>& values) {
		TreeNode* node = new TreeNode();
		node->val = values[0];

		build_node(values, node, 1, 'l');
		build_node(values, node, 2, 'r');

		return node;
	}

	void print(const std::vector<std::vector<int>>& board) {
		std::cout << "{ ";
		for (auto& v : board) {
			std::cout << "{ ";
			for (auto& c : v) {
				std::cout << c << " ";
			}
			std::cout << "} ";
		}
		std::cout << "} " << std::endl;
	};
	// AUX END ----------------------

	void transverse(std::string &res, TreeNode* node, uint64_t level) {
		if (node == nullptr) {
			return;
		}

		res += std::to_string(level) + "=" + std::to_string(node->val) + ",";

		level *= 2;
		transverse(res, node->left, level + 1);
		transverse(res, node->right, level + 2);
	}

	// Encodes a tree to a single string.
	string serialize(TreeNode* root) {
		if (root == nullptr) { return { }; }
		std::string res;
		transverse(res, root, 0);
		if (res.size() >= 1) {
			res.resize(res.size() - 1);
		}
		return res;
	}

	std::pair<uint64_t, int> get_kv(const std::string& kv) {
		size_t pos = kv.find('=');
		if (pos == std::string::npos) {
			return {-1, -1};
		}
		std::string k = kv.substr(0, pos);
		std::string v = kv.substr(pos+1);

		return { std::stoull(k), std::stoi(v) };
	}

	std::string next_token(const std::string& values, size_t &offset) {
		size_t pos = values.find(',', offset);
		if(pos == std::string::npos) {
			std::string val = values.substr(offset);
			offset = std::string::npos;
			return val;
		}

		std::string val = values.substr(offset, pos-offset);
		offset = pos + 1;
		return val;
	}

	std::optional<int> get(const std::unordered_map<int, int>& m, int k) {
		auto it = m.find(k);
		if (it == m.end()) {
			return std::nullopt;
		}
		return it->second;
	}

	void build_tree_node(const std::unordered_map<int, int>& tree_kv, TreeNode* parent_node, uint64_t pos, char dir) {
		auto maybe_val = get(tree_kv, pos);
		if (!maybe_val) {
			return;
		}

		TreeNode* node = new TreeNode();
		node->val = *maybe_val;

		if (dir == 'l') { parent_node->left = node; }
		else /* == r */ { parent_node->right = node; }

		pos *= 2;
		build_tree_node(tree_kv, node, pos + 1, 'l');
		build_tree_node(tree_kv, node, pos + 2, 'r');
	}

	TreeNode* build_tree(const std::unordered_map<int, int>& tree_kv) {
		if (tree_kv.empty()) return {};

		TreeNode* node = new TreeNode();

		node->val = get(tree_kv, 0).value();
		build_tree_node(tree_kv, node, 1, 'l');
		build_tree_node(tree_kv, node, 2, 'r');

		return node;
	}

	// Decodes your encoded data to tree.
	TreeNode* deserialize(string data) {
		if (data.empty()) {
			return {};
		}

		
		std::unordered_map<int, int> tree_kv;
		std::vector<std::string> values;
		size_t offset = 0;
		while(offset != std::string::npos) {
			std::string tok = next_token(data, offset);
			if (!tok.empty()) {
				values.push_back(tok);
				auto [k, v] = get_kv(tok);
				tree_kv[k] = v;
			}
		}
		TreeNode *root = build_tree(tree_kv);
		return root;
	}

	void run() {
		//std::vector<int> values { 3, 9, 20, -1, -1, 15, 7 };
		//// values = { 1, 2, 3, 4, -1, -1, 5, 6, 7, -1, -1, 8, 9, 10, 11 };
		//values = { 1,2,3,-1,-1,4,5,6,7 };
		//values = { 1,-1,2,-1,3,-1,4,-1,5,-1,6,-1,7,-1,8,-1,9,-1,10,-1,11,-1,12,-1,13,-1,14,-1,15,-1,16,-1,17,-1,18,-1,19,-1,20,-1,21,-1,22,-1,23,-1,24,-1,25,-1,26,-1,27,-1,28,-1,29,-1,30,-1,31,-1,32,-1,33,-1,34,-1,35,-1,36,-1,37,-1,38,-1,39,-1,40,-1,41,-1,42,-1,43,-1,44,-1,45,-1,46,-1,47,-1,48,-1,49,-1,50,-1,51,-1,52,-1,53,-1,54,-1,55,-1,56,-1,57,-1,58,-1,59,-1,60,-1,61,-1,62,-1,63,-1,64,-1,65,-1,66,-1,67,-1,68,-1,69,-1,70,-1,71,-1,72,-1,73,-1,74,-1,75,-1,76,-1,77,-1,78,-1,79,-1,80,-1,81,-1,82,-1,83,-1,84,-1,85,-1,86,-1,87,-1,88,-1,89,-1,90,-1,91,-1,92,-1,93,-1,94,-1,95,-1,96,-1,97,-1,98,-1,99,-1,100,-1,101,-1,102,-1,103,-1,104,-1,105,-1,106,-1,107,-1,108,-1,109,-1,110,-1,111,-1,112,-1,113,-1,114,-1,115,-1,116,-1,117,-1,118,-1,119,-1,120,-1,121,-1,122,-1,123,-1,124,-1,125,-1,126,-1,127,-1,128,-1,129,-1,130,-1,131,-1,132,-1,133,-1,134,-1,135,-1,136,-1,137,-1,138,-1,139,-1,140,-1,141,-1,142,-1,143,-1,144,-1,145,-1,146,-1,147,-1,148,-1,149,-1,150,-1,151,-1,152,-1,153,-1,154,-1,155,-1,156,-1,157,-1,158,-1,159,-1,160,-1,161,-1,162,-1,163,-1,164,-1,165,-1,166,-1,167,-1,168,-1,169,-1,170,-1,171,-1,172,-1,173,-1,174,-1,175,-1,176,-1,177,-1,178,-1,179,-1,180,
		//-1,181,-1,182,-1,183,-1,184,-1,185,-1,186,-1,187,-1,188,-1,189,-1,190,-1,191,-1,192,-1,193,-1,194,-1,195,-1,196,-1,197,-1,198,-1,199,-1,200,-1,201,-1,202,-1,203,-1,204,-1,205,-1,206,-1,207,-1,208,-1,209,-1,210,-1,211,-1,212,-1,213,-1,214,-1,215,-1,216,-1,217,-1,218,-1,219,-1,220,-1,221,-1,222,-1,223,-1,224,-1,225,-1,226,-1,227,-1,228,-1,229,-1,230,-1,231,-1,232,-1,233,-1,234,-1,235,-1,236,-1,237,-1,238,-1,239,-1,240,-1,241,-1,242,-1,243,-1,244,-1,245,-1,246,-1,247,-1,248,-1,249,-1,250,-1,251,-1,252,-1,253,-1,254,-1,255,-1,256,-1,257,-1,258,-1,259,-1,260,-1,261,-1,262,-1,263,-1,264,-1,265,-1,266,-1,267,-1,268,-1,269,-1,270,-1,271,-1,272,-1,273,-1,274,-1,275,-1,276,-1,277,-1,278,-1,279,-1,280,-1,281,-1,282,-1,283,-1,284,-1,285,-1,286,-1,287,-1,288,-1,289,-1,290,-1,291,-1,292,-1,293,-1,294,-1,295,-1,296,-1,297,-1,298,-1,299,-1,300,-1,301,-1,302,-1,303,-1,304,-1,305,-1,306,-1,307,-1,308,-1,309,-1,310,-1,311,-1,312,-1,313,-1,314,-1,315,-1,316,-1,317,-1,318,-1,319,-1,320,-1,321,-1,322,-1,323,-1,324,-1,325,-1,326,-1,327,-1,328,-1,329,-1,330,-1,331,-1,332,-1,333,-1,334,-1,335,-1,336,-1,337,-1,338,-1,339,-1,340,-1,341,-1,342,-1,343,-1,344,-1,345,-1,346,-1,347,-1,348,-1,349,-1,350,-1,351,-1,352,-1,353,-1,354,-1,355,-1,356,-1,357,-1,358,-1,359,-1,360,-1,361,-1,362,-1,363,-1,364,-1,365,-1,366,-1,367,-1,368,-1,369,-1,370,-1,371,-1,372,-1,373,-1,374,-1,375,-1,376,-1,377,-1,378,-1,379,-1,380,-1,381,-1,382,-1,383,-1,384,-1,385,-1,386,-1,387,-1,388,-1,389,-1,390,-1,391,-1,392,-1,393,-1,394,-1,395,-1,396,-1,397,-1,398,-1,399,-1,400,-1,401,-1,402,-1,403,-1,404,-1,405,-1,406,-1,
		//407,-1,408,-1,409,-1,410,-1,411,-1,412,-1,413,-1,414,-1,415,-1,416,-1,417,-1,418,-1,419,-1,420,-1,421,-1,422,-1,423,-1,424,-1,425,-1,426,-1,427,-1,428,-1,429,-1,430,-1,431,-1,432,-1,433,-1,434,-1,435,-1,436,-1,437,-1,438,-1,439,-1,440,-1,441,-1,442,-1,443,-1,444,-1,445,-1,446,-1,447,-1,448,-1,449,-1,450,-1,451,-1,452,-1,453,-1,454,-1,455,-1,456,-1,457,-1,458,-1,459,-1,460,-1,461,-1,462,-1,463,-1,464,-1,465,-1,466,-1,467,-1,468,-1,469,-1,470,-1,471,-1,472,-1,473,-1,474,-1,475,-1,476,-1,477,-1,478,-1,479,-1,480,-1,481,-1,482,-1,483,-1,484,-1,485,-1,486,-1,487,-1,488,-1,489,-1,490,-1,491,-1,492,-1,493,-1,494,-1,495,-1,496,-1,497,-1,498,-1,499,-1,500,-1,501,-1,502,-1,503,-1,504,-1,505,-1,506,-1,507,-1,508,-1,509,-1,510,-1,511,-1,512,-1,513,-1,514,-1,515,-1,516,-1,517,-1,518,-1,519,-1,520,-1,521,-1,522,-1,523,-1,524,-1,525,-1,526,-1,527,-1,528,-1,529,-1,530,-1,531,-1,532,-1,533,-1,534,-1,535,-1,536,-1,537,-1,538,-1,539,-1,540,-1,541,-1,542,-1,543,-1,544,-1,545,-1,546,-1,547,-1,548,-1,549,-1,550,-1,551,-1,552,-1,553,-1,554,-1,555,-1,556,-1,557,-1,558,-1,559,-1,560,-1,561,-1,562,-1,563,-1,564,-1,565,-1,566,-1,567,-1,568,-1,569,-1,570,-1,571,-1,572,-1,573,-1,574,-1,575,-1,576,-1,577,-1,578,-1,579,-1,580,-1,581,-1,582,-1,583,-1,584,-1,585,-1,586,-1,587,-1,588,-1,589,-1,590,-1,591,-1,592,-1,593,-1,594,-1,595,-1,596,-1,597,-1,598,-1,599,-1,600,-1,601,-1,602,-1,603,-1,604,-1,605,-1,606,-1,607,-1,608,-1,609,-1,610,-1,611,-1,612,-1,613,-1,614,-1,615,-1,616,-1,617,-1,618,-1,619,-1,620,-1,621,-1,622,-1,623,-1,624,-1,625,-1,626,-1,627,-1,628,-1,629,-1,630,-1,631,-1,632,-1,633,-1,634,-1,635,-1,636,-1,637,-1,638,-1,639,-1,640,-1,641,-1,642,-1,643,-1,644,-1,645,-1,646,-1,647,-1,648,-1,649,-1,650,-1,651,-1,652,-1,653,-1,654,-1,655,-1,656,-1,657,-1,658,-1,659,-1,660,-1,661,-1,662,-1,663,-1,664,-1,665,-1,666,-1,667,-1,668,-1,669,-1,670,-1,671,-1,672,-1,673,-1,674,-1,675,-1,676,-1,677,-1,678,-1,679,-1,680,-1,681,-1,682,-1,683,-1,684,-1,685,-1,686,-1,687,-1,688,-1,689,-1,690,-1,691,-1,692,-1,693,-1,694,-1,695,-1,696,-1,697,-1,698,-1,699,-1,700,-1,701,
		//-1,702,-1,703,-1,704,-1,705,-1,706,-1,707,-1,708,-1,709,-1,710,-1,711,-1,712,-1,713,-1,714,-1,715,-1,716,-1,717,-1,718,-1,719,-1,720,-1,721,-1,722,-1,723,-1,724,-1,725,-1,726,-1,727,-1,728,-1,729,-1,730,-1,731,-1,732,-1,733,-1,734,-1,735,-1,736,-1,737,-1,738,-1,739,-1,740,-1,741,-1,742,-1,743,-1,744,-1,745,-1,746,-1,747,-1,748,-1,749,-1,750,-1,751,-1,752,-1,753,-1,754,-1,755,-1,756,-1,757,-1,758,-1,759,-1,760,-1,761,-1,762,-1,763,-1,764,-1,765,-1,766,-1,767,-1,768,-1,769,-1,770,-1,771,-1,772,-1,773,-1,774,-1,775,-1,776,-1,777,-1,778,-1,779,-1,780,-1,781,-1,782,-1,783,-1,784,-1,785,-1,786,-1,787,-1,788,-1,789,-1,790,-1,791,-1,792,-1,793,-1,794,-1,795,-1,796,-1,797,-1,798,-1,799,-1,800,-1,801,-1,802,-1,803,-1,804,-1,805,-1,806,-1,807,-1,808,-1,809,-1,810,-1,811,-1,812,-1,813,-1,814,-1,815,-1,816,-1,817,-1,818,-1,819,-1,820,-1,821,-1,822,-1,823,-1,824,-1,825,-1,826,-1,827,-1,828,-1,829,-1,830,-1,831,-1,832,-1,833,-1,834,-1,835,-1,836,-1,837,-1,838,-1,839,-1,840,-1,841,-1,842,-1,843,-1,844,-1,845,-1,846,-1,847,-1,848,-1,849,-1,850,-1,851,-1,852,-1,853,-1,854,-1,855,-1,856,-1,857,-1,858,-1,859,-1,860,-1,861,-1,862,-1,863,-1,864,-1,865,-1,866,-1,867,-1,868,-1,869,-1,870,-1,871,-1,872,-1,873,-1,874,-1,875,-1,876,-1,877,-1,878,-1,879,-1,880,-1,881,-1,882,-1,883,-1,884,-1,885,-1,886,-1,887,-1,888,-1,889,-1,890,-1,891,-1,892,-1,893,-1,894,-1,895,-1,896,-1,897,-1,898,-1,899,-1,900,-1,901,-1,902,-1,903,-1,904,-1,905,-1,906,-1,907,-1,908,-1,909,-1,910,-1,911,-1,912,-1,913,-1,914,-1,915,-1,916,-1,917,-1,918,-1,919,-1,920,-1,921,-1,922,-1,923,-1,924,-1,925,-1,926,-1,927,-1,928,-1,929,-1,930,-1,931,-1,932,-1,933,-1,934,-1,935,-1,936,-1,937,-1,938,-1,939,-1,940,-1,941,-1,942,-1,943,-1,944,-1,945,-1,946,-1,947,-1,948,-1,949,-1,950,-1,951,-1,952,-1,953,-1,954,-1,955,-1,956,-1,957,-1,958,-1,959,-1,960,-1,961,-1,962,-1,963,-1,964,-1,965,-1,966,-1,967,-1,968,-1,969,-1,970,-1,971,-1,972,-1,973,-1,974,-1,975,-1,976,-1,977,-1,978,-1,979,-1,980,-1,981,-1,982,-1,983,-1,984,-1,985,-1,986,-1,987,-1,988,-1,989,-1,990,-1,991,-1,992,-1,993,-1,994,-1,995,-1,996,-1,997,-1,998,-1,999,-1,1000 };
		//TreeNode* root = build(values);

		//auto res = serialize(root);
		//std::cout << res << std::endl;
		
		std::string res = "0=1,2=2,6=3,14=4,30=5,62=6,126=7,254=8,510=9,1022=10,2046=11,4094=12,8190=13,16382=14,32766=15,65534=16,131070=17,262142=18,524286=19,1048574=20,2097150=21,4194302=22,8388606=23,16777214=24,33554430=25,67108862=26,134217726=27,268435454=28,536870910=29,1073741822=30,2147483646=31,4294967294=32,8589934590=33,17179869182=34,34359738366=35,68719476734=36,137438953470=37,274877906942=38,549755813886=39,1099511627774=40,2199023255550=41,4398046511102=42,8796093022206=43,17592186044414=44,35184372088830=45,70368744177662=46,140737488355326=47,281474976710654=48,562949953421310=49,1125899906842622=50,2251799813685246=51,4503599627370494=52,9007199254740990=53,18014398509481982=54,36028797018963966=55,72057594037927934=56,144115188075855870=57,288230376151711742=58,576460752303423486=59,1152921504606846974=60,2305843009213693950=61,4611686018427387902=62,9223372036854775806=63,18446744073709551614=64,18446744073709551614=65,18446744073709551614=66,18446744073709551614=67,18446744073709551614=68,18446744073709551614=69,18446744073709551614=70,18446744073709551614=71,18446744073709551614=72,18446744073709551614=73,18446744073709551614=74,18446744073709551614=75,18446744073709551614=76,18446744073709551614=77,18446744073709551614=78,18446744073709551614=79,18446744073709551614=80,18446744073709551614=81,18446744073709551614=82,18446744073709551614=83,18446744073709551614=84,18446744073709551614=85,18446744073709551614=86,18446744073709551614=87,18446744073709551614=88,18446744073709551614=89,18446744073709551614=90,18446744073709551614=91,18446744073709551614=92,18446744073709551614=93,18446744073709551614=94,18446744073709551614=95,18446744073709551614=96,18446744073709551614=97,18446744073709551614=98,";
		res += "18446744073709551614=99,18446744073709551614=100,18446744073709551614=101,18446744073709551614=102,18446744073709551614=103,18446744073709551614=104,18446744073709551614=105,18446744073709551614=106,18446744073709551614=107,18446744073709551614=108,18446744073709551614=109,18446744073709551614=110,18446744073709551614=111,18446744073709551614=112,18446744073709551614=113,18446744073709551614=114,18446744073709551614=115,18446744073709551614=116,18446744073709551614=117,18446744073709551614=118,18446744073709551614=119,18446744073709551614=120,18446744073709551614=121,18446744073709551614=122,18446744073709551614=123,18446744073709551614=124,18446744073709551614=125,18446744073709551614=126,18446744073709551614=127,18446744073709551614=128,18446744073709551614=129,18446744073709551614=130,18446744073709551614=131,18446744073709551614=132,18446744073709551614=133,18446744073709551614=134,18446744073709551614=135,18446744073709551614=136,18446744073709551614=137,18446744073709551614=138,18446744073709551614=139,18446744073709551614=140,18446744073709551614=141,18446744073709551614=142,18446744073709551614=143,18446744073709551614=144,18446744073709551614=145,18446744073709551614=146,18446744073709551614=147,18446744073709551614=148,18446744073709551614=149,18446744073709551614=150,18446744073709551614=151,18446744073709551614=152,18446744073709551614=153,18446744073709551614=154,18446744073709551614=155,18446744073709551614=156,18446744073709551614=157,18446744073709551614=158,18446744073709551614=159,18446744073709551614=160,18446744073709551614=161,18446744073709551614=162,18446744073709551614=163,18446744073709551614=164,18446744073709551614=165,18446744073709551614=166,18446744073709551614=167,18446744073709551614=168,18446744073709551614=169,18446744073709551614=170,18446744073709551614=171,18446744073709551614=172,18446744073709551614=173,18446744073709551614=174,18446744073709551614=175,18446744073709551614=176,18446744073709551614=177,18446744073709551614=178,18446744073709551614=179,18446744073709551614=180,18446744073709551614=181,18446744073709551614=182,18446744073709551614=183,18446744073709551614=184,18446744073709551614=185,18446744073709551614=186,18446744073709551614=187,18446744073709551614=188,18446744073709551614=189,18446744073709551614=190,18446744073709551614=191,18446744073709551614=192,18446744073709551614=193,";
		res += "18446744073709551614=194,18446744073709551614=195,18446744073709551614=196,18446744073709551614=197,18446744073709551614=198,18446744073709551614=199,18446744073709551614=200,18446744073709551614=201,18446744073709551614=202,18446744073709551614=203,18446744073709551614=204,18446744073709551614=205,18446744073709551614=206,18446744073709551614=207,18446744073709551614=208,18446744073709551614=209,18446744073709551614=210,18446744073709551614=211,18446744073709551614=212,18446744073709551614=213,18446744073709551614=214,18446744073709551614=215,18446744073709551614=216,18446744073709551614=217,18446744073709551614=218,18446744073709551614=219,18446744073709551614=220,18446744073709551614=221,18446744073709551614=222,18446744073709551614=223,18446744073709551614=224,18446744073709551614=225,18446744073709551614=226,18446744073709551614=227,18446744073709551614=228,18446744073709551614=229,18446744073709551614=230,18446744073709551614=231,18446744073709551614=232,18446744073709551614=233,18446744073709551614=234,18446744073709551614=235,18446744073709551614=236,18446744073709551614=237,18446744073709551614=238,18446744073709551614=239,18446744073709551614=240,18446744073709551614=241,18446744073709551614=242,18446744073709551614=243,18446744073709551614=244,18446744073709551614=245,18446744073709551614=246,18446744073709551614=247,18446744073709551614=248,18446744073709551614=249,18446744073709551614=250,18446744073709551614=251,18446744073709551614=252,18446744073709551614=253,18446744073709551614=254,18446744073709551614=255,18446744073709551614=256,18446744073709551614=257,18446744073709551614=258,18446744073709551614=259,18446744073709551614=260,18446744073709551614=261,18446744073709551614=262,18446744073709551614=263,18446744073709551614=264,18446744073709551614=265,18446744073709551614=266,18446744073709551614=267,18446744073709551614=268,18446744073709551614=269,18446744073709551614=270,18446744073709551614=271,18446744073709551614=272,18446744073709551614=273,18446744073709551614=274,18446744073709551614=275,18446744073709551614=276,18446744073709551614=277,18446744073709551614=278,18446744073709551614=279,18446744073709551614=280,18446744073709551614=281,18446744073709551614=282,18446744073709551614=283,18446744073709551614=284,18446744073709551614=285,18446744073709551614=286,18446744073709551614=287,18446744073709551614=288,18446744073709551614=289,18446744073709551614=290,18446744073709551614=291,18446744073709551614=292,18446744073709551614=293,18446744073709551614=294,18446744073709551614=295,18446744073709551614=296,18446744073709551614=297,";
		res += "18446744073709551614=298,18446744073709551614=299,18446744073709551614=300,18446744073709551614=301,18446744073709551614=302,18446744073709551614=303,18446744073709551614=304,18446744073709551614=305,18446744073709551614=306,18446744073709551614=307,18446744073709551614=308,18446744073709551614=309,18446744073709551614=310,18446744073709551614=311,18446744073709551614=312,18446744073709551614=313,18446744073709551614=314,18446744073709551614=315,18446744073709551614=316,18446744073709551614=317,18446744073709551614=318,18446744073709551614=319,18446744073709551614=320,18446744073709551614=321,18446744073709551614=322,18446744073709551614=323,18446744073709551614=324,18446744073709551614=325,18446744073709551614=326,18446744073709551614=327,18446744073709551614=328,18446744073709551614=329,18446744073709551614=330,18446744073709551614=331,18446744073709551614=332,18446744073709551614=333,18446744073709551614=334,18446744073709551614=335,18446744073709551614=336,18446744073709551614=337,18446744073709551614=338,18446744073709551614=339,18446744073709551614=340,18446744073709551614=341,18446744073709551614=342,18446744073709551614=343,18446744073709551614=344,18446744073709551614=345,18446744073709551614=346,18446744073709551614=347,18446744073709551614=348,18446744073709551614=349,18446744073709551614=350,18446744073709551614=351,18446744073709551614=352,18446744073709551614=353,18446744073709551614=354,18446744073709551614=355,18446744073709551614=356,18446744073709551614=357,18446744073709551614=358,18446744073709551614=359,18446744073709551614=360,18446744073709551614=361,18446744073709551614=362,18446744073709551614=363,18446744073709551614=364,18446744073709551614=365,18446744073709551614=366,18446744073709551614=367,18446744073709551614=368,18446744073709551614=369,18446744073709551614=370,18446744073709551614=371,18446744073709551614=372,18446744073709551614=373,18446744073709551614=374,18446744073709551614=375,18446744073709551614=376,18446744073709551614=377,18446744073709551614=378,18446744073709551614=379,18446744073709551614=380,18446744073709551614=381,18446744073709551614=382,18446744073709551614=383,18446744073709551614=384,18446744073709551614=385,18446744073709551614=386,18446744073709551614=387,18446744073709551614=388,18446744073709551614=389,18446744073709551614=390,18446744073709551614=391,18446744073709551614=392,18446744073709551614=393,18446744073709551614=394,18446744073709551614=395,18446744073709551614=396,18446744073709551614=397,18446744073709551614=398,18446744073709551614=399,18446744073709551614=400,18446744073709551614=401,18446744073709551614=402,18446744073709551614=403,18446744073709551614=404,18446744073709551614=405,18446744073709551614=406,18446744073709551614=407,18446744073709551614=408,18446744073709551614=409,18446744073709551614=410,18446744073709551614=411,18446744073709551614=412,18446744073709551614=413,18446744073709551614=414,18446744073709551614=415,18446744073709551614=416,18446744073709551614=417,18446744073709551614=418,18446744073709551614=419,18446744073709551614=420,18446744073709551614=421,18446744073709551614=422,18446744073709551614=423,18446744073709551614=424,18446744073709551614=425,18446744073709551614=426,18446744073709551614=427,18446744073709551614=428,18446744073709551614=429,18446744073709551614=430,18446744073709551614=431,18446744073709551614=432,18446744073709551614=433,18446744073709551614=434,18446744073709551614=435,18446744073709551614=436,18446744073709551614=437,18446744073709551614=438,18446744073709551614=439,18446744073709551614=440,18446744073709551614=441,18446744073709551614=442,18446744073709551614=443,18446744073709551614=444,18446744073709551614=445,18446744073709551614=446,18446744073709551614=447,18446744073709551614=448,18446744073709551614=449,18446744073709551614=450,18446744073709551614=451,18446744073709551614=452,18446744073709551614=453,18446744073709551614=454,18446744073709551614=455,18446744073709551614=456,";
		res += "18446744073709551614=457,18446744073709551614=458,18446744073709551614=459,18446744073709551614=460,18446744073709551614=461,18446744073709551614=462,18446744073709551614=463,18446744073709551614=464,18446744073709551614=465,18446744073709551614=466,18446744073709551614=467,18446744073709551614=468,18446744073709551614=469,18446744073709551614=470,18446744073709551614=471,18446744073709551614=472,18446744073709551614=473,18446744073709551614=474,18446744073709551614=475,18446744073709551614=476,18446744073709551614=477,18446744073709551614=478,18446744073709551614=479,18446744073709551614=480,18446744073709551614=481,18446744073709551614=482,18446744073709551614=483,18446744073709551614=484,18446744073709551614=485,18446744073709551614=486,18446744073709551614=487,18446744073709551614=488,18446744073709551614=489,18446744073709551614=490,18446744073709551614=491,18446744073709551614=492,18446744073709551614=493,18446744073709551614=494,18446744073709551614=495,18446744073709551614=496,18446744073709551614=497,18446744073709551614=498,18446744073709551614=499,18446744073709551614=500,18446744073709551614=501,18446744073709551614=502,18446744073709551614=503,18446744073709551614=504,18446744073709551614=505,18446744073709551614=506,18446744073709551614=507,18446744073709551614=508,18446744073709551614=509,18446744073709551614=510,18446744073709551614=511,18446744073709551614=512,18446744073709551614=513,18446744073709551614=514,18446744073709551614=515,18446744073709551614=516,18446744073709551614=517,18446744073709551614=518,18446744073709551614=519,18446744073709551614=520,18446744073709551614=521,18446744073709551614=522,18446744073709551614=523,18446744073709551614=524,18446744073709551614=525,18446744073709551614=526,18446744073709551614=527,18446744073709551614=528,18446744073709551614=529,18446744073709551614=530,18446744073709551614=531,18446744073709551614=532,18446744073709551614=533,18446744073709551614=534,18446744073709551614=535,18446744073709551614=536,18446744073709551614=537,18446744073709551614=538,18446744073709551614=539,18446744073709551614=540,18446744073709551614=541,18446744073709551614=542,18446744073709551614=543,18446744073709551614=544,18446744073709551614=545,18446744073709551614=546,18446744073709551614=547,18446744073709551614=548,18446744073709551614=549,18446744073709551614=550,18446744073709551614=551,18446744073709551614=552,18446744073709551614=553,18446744073709551614=554,18446744073709551614=555,18446744073709551614=556,18446744073709551614=557,18446744073709551614=558,18446744073709551614=559,18446744073709551614=560,18446744073709551614=561,18446744073709551614=562,18446744073709551614=563,18446744073709551614=564,18446744073709551614=565,18446744073709551614=566,18446744073709551614=567,18446744073709551614=568,18446744073709551614=569,18446744073709551614=570,18446744073709551614=571,18446744073709551614=572,18446744073709551614=573,18446744073709551614=574,18446744073709551614=575,";
		res += "18446744073709551614=576,18446744073709551614=577,18446744073709551614=578,18446744073709551614=579,18446744073709551614=580,18446744073709551614=581,18446744073709551614=582,18446744073709551614=583,18446744073709551614=584,18446744073709551614=585,18446744073709551614=586,18446744073709551614=587,18446744073709551614=588,18446744073709551614=589,18446744073709551614=590,18446744073709551614=591,18446744073709551614=592,18446744073709551614=593,18446744073709551614=594,18446744073709551614=595,18446744073709551614=596,18446744073709551614=597,18446744073709551614=598,18446744073709551614=599,18446744073709551614=600,18446744073709551614=601,18446744073709551614=602,18446744073709551614=603,18446744073709551614=604,18446744073709551614=605,18446744073709551614=606,18446744073709551614=607,18446744073709551614=608,18446744073709551614=609,18446744073709551614=610,18446744073709551614=611,18446744073709551614=612,18446744073709551614=613,18446744073709551614=614,18446744073709551614=615,18446744073709551614=616,18446744073709551614=617,18446744073709551614=618,18446744073709551614=619,18446744073709551614=620,18446744073709551614=621,18446744073709551614=622,18446744073709551614=623,18446744073709551614=624,18446744073709551614=625,18446744073709551614=626,18446744073709551614=627,18446744073709551614=628,18446744073709551614=629,18446744073709551614=630,18446744073709551614=631,18446744073709551614=632,18446744073709551614=633,18446744073709551614=634,18446744073709551614=635,18446744073709551614=636,18446744073709551614=637,18446744073709551614=638,18446744073709551614=639,18446744073709551614=640,18446744073709551614=641,18446744073709551614=642,18446744073709551614=643,18446744073709551614=644,18446744073709551614=645,18446744073709551614=646,18446744073709551614=647,18446744073709551614=648,18446744073709551614=649,18446744073709551614=650,18446744073709551614=651,18446744073709551614=652,18446744073709551614=653,18446744073709551614=654,18446744073709551614=655,18446744073709551614=656,18446744073709551614=657,18446744073709551614=658,18446744073709551614=659,18446744073709551614=660,18446744073709551614=661,18446744073709551614=662,18446744073709551614=663,18446744073709551614=664,18446744073709551614=665,18446744073709551614=666,18446744073709551614=667,18446744073709551614=668,18446744073709551614=669,18446744073709551614=670,18446744073709551614=671,18446744073709551614=672,18446744073709551614=673,18446744073709551614=674,18446744073709551614=675,18446744073709551614=676,18446744073709551614=677,18446744073709551614=678,18446744073709551614=679,18446744073709551614=680,18446744073709551614=681,18446744073709551614=682,18446744073709551614=683,18446744073709551614=684,18446744073709551614=685,18446744073709551614=686,18446744073709551614=687,18446744073709551614=688,18446744073709551614=689,18446744073709551614=690,18446744073709551614=691,18446744073709551614=692,18446744073709551614=693,18446744073709551614=694,18446744073709551614=695,18446744073709551614=696,18446744073709551614=697,18446744073709551614=698,18446744073709551614=699,18446744073709551614=700,18446744073709551614=701,18446744073709551614=702,18446744073709551614=703,18446744073709551614=704,";
		res += "18446744073709551614=705,18446744073709551614=706,18446744073709551614=707,18446744073709551614=708,18446744073709551614=709,18446744073709551614=710,18446744073709551614=711,18446744073709551614=712,18446744073709551614=713,18446744073709551614=714,18446744073709551614=715,18446744073709551614=716,18446744073709551614=717,18446744073709551614=718,18446744073709551614=719,18446744073709551614=720,18446744073709551614=721,18446744073709551614=722,18446744073709551614=723,18446744073709551614=724,18446744073709551614=725,18446744073709551614=726,18446744073709551614=727,18446744073709551614=728,18446744073709551614=729,18446744073709551614=730,18446744073709551614=731,18446744073709551614=732,18446744073709551614=733,18446744073709551614=734,18446744073709551614=735,18446744073709551614=736,18446744073709551614=737,18446744073709551614=738,18446744073709551614=739,18446744073709551614=740,18446744073709551614=741,18446744073709551614=742,18446744073709551614=743,18446744073709551614=744,18446744073709551614=745,18446744073709551614=746,18446744073709551614=747,18446744073709551614=748,18446744073709551614=749,18446744073709551614=750,18446744073709551614=751,18446744073709551614=752,18446744073709551614=753,18446744073709551614=754,18446744073709551614=755,18446744073709551614=756,18446744073709551614=757,18446744073709551614=758,18446744073709551614=759,18446744073709551614=760,18446744073709551614=761,18446744073709551614=762,18446744073709551614=763,18446744073709551614=764,18446744073709551614=765,18446744073709551614=766,18446744073709551614=767,18446744073709551614=768,18446744073709551614=769,18446744073709551614=770,18446744073709551614=771,18446744073709551614=772,18446744073709551614=773,18446744073709551614=774,18446744073709551614=775,18446744073709551614=776,18446744073709551614=777,18446744073709551614=778,18446744073709551614=779,18446744073709551614=780,18446744073709551614=781,18446744073709551614=782,18446744073709551614=783,18446744073709551614=784,18446744073709551614=785,18446744073709551614=786,18446744073709551614=787,18446744073709551614=788,18446744073709551614=789,18446744073709551614=790,18446744073709551614=791,18446744073709551614=792,18446744073709551614=793,18446744073709551614=794,18446744073709551614=795,18446744073709551614=796,18446744073709551614=797,18446744073709551614=798,18446744073709551614=799,18446744073709551614=800,18446744073709551614=801,18446744073709551614=802,18446744073709551614=803,18446744073709551614=804,18446744073709551614=805,18446744073709551614=806,18446744073709551614=807,18446744073709551614=808,18446744073709551614=809,18446744073709551614=810,18446744073709551614=811,18446744073709551614=812,18446744073709551614=813,18446744073709551614=814,18446744073709551614=815,18446744073709551614=816,18446744073709551614=817,18446744073709551614=818,18446744073709551614=819,18446744073709551614=820,18446744073709551614=821,18446744073709551614=822,18446744073709551614=823,18446744073709551614=824,18446744073709551614=825,18446744073709551614=826,18446744073709551614=827,18446744073709551614=828,18446744073709551614=829,18446744073709551614=830,18446744073709551614=831,18446744073709551614=832,18446744073709551614=833,";
		res += "18446744073709551614=834,18446744073709551614=835,18446744073709551614=836,18446744073709551614=837,18446744073709551614=838,18446744073709551614=839,18446744073709551614=840,18446744073709551614=841,18446744073709551614=842,18446744073709551614=843,18446744073709551614=844,18446744073709551614=845,18446744073709551614=846,18446744073709551614=847,18446744073709551614=848,18446744073709551614=849,18446744073709551614=850,18446744073709551614=851,18446744073709551614=852,18446744073709551614=853,18446744073709551614=854,18446744073709551614=855,18446744073709551614=856,18446744073709551614=857,18446744073709551614=858,18446744073709551614=859,18446744073709551614=860,18446744073709551614=861,18446744073709551614=862,18446744073709551614=863,18446744073709551614=864,18446744073709551614=865,18446744073709551614=866,18446744073709551614=867,18446744073709551614=868,18446744073709551614=869,18446744073709551614=870,18446744073709551614=871,18446744073709551614=872,18446744073709551614=873,18446744073709551614=874,18446744073709551614=875,18446744073709551614=876,18446744073709551614=877,18446744073709551614=878,18446744073709551614=879,18446744073709551614=880,18446744073709551614=881,18446744073709551614=882,18446744073709551614=883,18446744073709551614=884,18446744073709551614=885,18446744073709551614=886,18446744073709551614=887,18446744073709551614=888,18446744073709551614=889,18446744073709551614=890,18446744073709551614=891,18446744073709551614=892,18446744073709551614=893,18446744073709551614=894,18446744073709551614=895,18446744073709551614=896,18446744073709551614=897,18446744073709551614=898,18446744073709551614=899,18446744073709551614=900,18446744073709551614=901,18446744073709551614=902,18446744073709551614=903,18446744073709551614=904,18446744073709551614=905,18446744073709551614=906,18446744073709551614=907,18446744073709551614=908,18446744073709551614=909,18446744073709551614=910,18446744073709551614=911,18446744073709551614=912,18446744073709551614=913,18446744073709551614=914,18446744073709551614=915,18446744073709551614=916,18446744073709551614=917,18446744073709551614=918,18446744073709551614=919,18446744073709551614=920,18446744073709551614=921,18446744073709551614=922,18446744073709551614=923,";
		res += "18446744073709551614=924,18446744073709551614=925,18446744073709551614=926,18446744073709551614=927,18446744073709551614=928,18446744073709551614=929,18446744073709551614=930,18446744073709551614=931,18446744073709551614=932,18446744073709551614=933,18446744073709551614=934,18446744073709551614=935,18446744073709551614=936,18446744073709551614=937,18446744073709551614=938,18446744073709551614=939,18446744073709551614=940,18446744073709551614=941,18446744073709551614=942,18446744073709551614=943,18446744073709551614=944,18446744073709551614=945,18446744073709551614=946,18446744073709551614=947,18446744073709551614=948,18446744073709551614=949,18446744073709551614=950,18446744073709551614=951,18446744073709551614=952,18446744073709551614=953,18446744073709551614=954,18446744073709551614=955,18446744073709551614=956,18446744073709551614=957,18446744073709551614=958,18446744073709551614=959,18446744073709551614=960,18446744073709551614=961,18446744073709551614=962,18446744073709551614=963,18446744073709551614=964,18446744073709551614=965,18446744073709551614=966,18446744073709551614=967,18446744073709551614=968,18446744073709551614=969,18446744073709551614=970,18446744073709551614=971,18446744073709551614=972,18446744073709551614=973,18446744073709551614=974,18446744073709551614=975,18446744073709551614=976,18446744073709551614=977,18446744073709551614=978,18446744073709551614=979,18446744073709551614=980,18446744073709551614=981,18446744073709551614=982,18446744073709551614=983,18446744073709551614=984,18446744073709551614=985,18446744073709551614=986,18446744073709551614=987,18446744073709551614=988,18446744073709551614=989,18446744073709551614=990,18446744073709551614=991,18446744073709551614=992,18446744073709551614=993,18446744073709551614=994,18446744073709551614=995,18446744073709551614=996,18446744073709551614=997,18446744073709551614=998,18446744073709551614=999,18446744073709551614=1000";

		auto new_root = deserialize(res);

		//BinTree bt(root);
		//bt.Dump();
		//BinTree bt2(new_root);
		//bt2.Dump();
	}

}
